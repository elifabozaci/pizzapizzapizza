<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Pizza Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cormorant', 'Playfair Display', serif;
            margin: 0;
            padding: 20px;
            background-color: #f4efe9;
        }
        h1, h2 {
            text-align: center;
            color: #8b4513;
        }
        form {
            max-width: 500px;
            margin: 0 auto;
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
        }
        label {
            font-weight: bold;
        }
        input, select, button {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #8b4513;
            color: white;
            font-size: 1em;
            cursor: pointer;
        }
        button:hover {
            background-color: #a0522d;
        }
        .output {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .output h3 {
            color: #8b4513;
        }
        .pizza-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .pizza-item img {
            width: 100px;
            height: 100px;
            border-radius: 8px;
            margin-right: 15px;
        }
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        input[type="checkbox"] {
            width: auto;
            margin: 0;
        }
        .error {
            border-color: red;
        }
        .error-message {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Create Your Custom Pizza Store</h1>
    <form id="pizza-form">
        <div class="form-step active" data-step="1">
            <div>
                <label for="store-name">Store Name:</label>
                <input type="text" id="store-name" placeholder="Enter your store's name" required>
            </div>
            <button type="button" onclick="nextStep()">Next</button>
        </div>
        <div class="form-step" data-step="2">
            <div>
                <label for="store-slogan">Store Slogan:</label>
                <input type="text" id="store-slogan" placeholder="Enter your store's slogan" required>
            </div>
            <button type="button" onclick="prevStep()">Back</button>
            <button type="button" onclick="nextStep()">Next</button>
        </div>
        <div class="form-step" data-step="3">
            <div>
                <label for="pizza-count">Number of Pizzas:</label>
                <select id="pizza-count" required>
                    <option value="">Select number of pizzas</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
            <button type="button" onclick="prevStep()">Back</button>
            <button type="button" onclick="nextStep()">Next</button>
        </div>
        <div id="pizza-fields-container"></div>
        <div class="form-step" data-step="100">
            <div>
                <label for="drinks-menu">Drinks Menu:</label>
                <div id="drinks-menu" class="checkbox-group">
                    <label><input type="checkbox" value="Cola, 1.99"> Cola - ₺1.99</label>
                    <label><input type="checkbox" value="Lemonade, 2.49"> Lemonade - ₺2.49</label>
                    <label><input type="checkbox" value="Water, 0.99"> Water - ₺0.99</label>
                    <label><input type="checkbox" value="Iced Tea, 2.29"> Iced Tea - ₺2.29</label>
                </div>
            </div>
            <button type="button" onclick="prevStep()">Back</button>
            <button type="submit">Generate Store</button>
        </div>
    </form>

    <div id="output" class="output" style="display:none;">
        <h2 id="output-store-name"></h2>
        <h3 id="output-store-slogan"></h3>
        <div>
            <h3>Pizza Menu:</h3>
            <div id="output-pizza-menu"></div>
        </div>
        <div>
            <h3>Drinks Menu:</h3>
            <ul id="output-drinks-menu"></ul>
        </div>
    </div>

    <script>
        let currentStep = 1;

        function validateStep(step) {
            const currentStepElement = document.querySelector(`.form-step[data-step="${step}"]`);
            const inputs = currentStepElement.querySelectorAll('input[required], select[required]');
            let isValid = true;

            inputs.forEach(input => {
                if (!input.value || (input.type === 'number' && input.value <= 0)) {
                    isValid = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });

            return isValid;
        }

        function showErrorMessage(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;

            const currentStep = document.querySelector('.form-step.active');
            const existingError = currentStep.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }
            currentStep.insertBefore(errorDiv, currentStep.firstChild);

            setTimeout(() => errorDiv.remove(), 3000);
        }

        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(element => {
                element.classList.remove('active');
                if (parseInt(element.getAttribute('data-step')) === step) {
                    element.classList.add('active');
                }
            });
        }

        function nextStep() {
            if (!validateStep(currentStep)) {
                showErrorMessage('Please fill in all required fields with valid values.');
                return;
            }

            currentStep++;
            const pizzaCount = parseInt(document.getElementById('pizza-count').value);
            if (currentStep > 3 && currentStep <= 3 + pizzaCount) {
                generatePizzaFields(pizzaCount);
            } else if (currentStep === 4 + pizzaCount) {
                showStep(100);
            } else {
                showStep(currentStep);
            }
        }

        function prevStep() {
            currentStep--;
            showStep(currentStep);
        }

        function generatePizzaFields(pizzaCount) {
            const pizzaFieldsContainer = document.getElementById('pizza-fields-container');
            pizzaFieldsContainer.innerHTML = '';
            for (let i = 1; i <= pizzaCount; i++) {
                const pizzaDiv = document.createElement('div');
                pizzaDiv.classList.add('form-step');
                pizzaDiv.setAttribute('data-step', 3 + i);
                pizzaDiv.innerHTML = `
                    <h3>Pizza ${i}</h3>
                    <div>
                        <label for="pizza-name-${i}">Pizza Name:</label>
                        <input type="text" id="pizza-name-${i}" placeholder="Enter pizza name" required>
                    </div>
                    <div>
                        <label>Ingredients:</label>
                        <div id="pizza-ingredients-${i}" class="checkbox-group">
                            <label><input type="checkbox" value="Tomato, https://example.com/tomato.jpg"> Tomato</label>
                            <label><input type="checkbox" value="Cheese, https://example.com/cheese.jpg"> Cheese</label>
                            <label><input type="checkbox" value="Pepperoni, https://example.com/pepperoni.jpg"> Pepperoni</label>
                            <label><input type="checkbox" value="Basil, https://example.com/basil.jpg"> Basil</label>
                        </div>
                    </div>
                    <div>
                        <label for="pizza-price-${i}">Price (₺):</label>
                        <input type="number" id="pizza-price-${i}" placeholder="Enter pizza price" required min="0.01" step="0.01">
                    </div>
                    <div class="pizza-image-container" id="pizza-image-container-${i}">
                        <h4>Pizza Image:</h4>
                        <img id="pizza-image-${i}" src="" alt="Pizza ${i}" style="display: none;">
                    </div>
                    <div class="button-group">
                        <button type="button" onclick="prevStep()">Back</button>
                        <button type="button" onclick="nextStep()">Next</button>
                    </div>
                `;
                pizzaFieldsContainer.appendChild(pizzaDiv);
            }
            showStep(4);
        }

        document.getElementById('pizza-form').addEventListener('submit', function(e) {
            e.preventDefault(); // Prevent form from reloading the page

            // Get user inputs
            const storeName = document.getElementById('store-name').value;
            const storeSlogan = document.getElementById('store-slogan').value;
            const pizzaCount = parseInt(document.getElementById('pizza-count').value);
            const pizzaMenu = [];
            for (let i = 1; i <= pizzaCount; i++) {
                const name = document.getElementById(`pizza-name-${i}`).value;
                const price = parseFloat(document.getElementById(`pizza-price-${i}`).value);
                if (isNaN(price) || price <= 0) {
                    alert(`Please enter a valid price for Pizza ${i}`);
                    return;
                }
                const ingredients = Array.from(
                    document.querySelectorAll(`#pizza-ingredients-${i} input[type="checkbox"]:checked`)
                ).map(input => input.value.split(', ')[0]); // Extract ingredient names
                const image = document.getElementById(`pizza-image-${i}`).src;

                pizzaMenu.push({ name, price: price.toFixed(2), ingredients, image });
            }

            const drinksMenu = Array.from(
                document.querySelectorAll('#drinks-menu input[type="checkbox"]:checked')
            ).map(input => {
                const [name, price] = input.value.split(', ');
                return { name, price: parseFloat(price).toFixed(2) };
            });

            // Populate output
            const outputDiv = document.getElementById('output');
            document.getElementById('output-store-name').textContent = storeName;
            document.getElementById('output-store-slogan').textContent = storeSlogan;

            // Populate pizza menu
            const pizzaMenuDiv = document.getElementById('output-pizza-menu');
            pizzaMenuDiv.innerHTML = '';
            pizzaMenu.forEach(pizza => {
                const pizzaItem = document.createElement('div');
                pizzaItem.className = 'pizza-item';
                pizzaItem.innerHTML = `
                    <img src="${pizza.image}" alt="${pizza.name}">
                    <div>
                        <h4>${pizza.name} - ₺${pizza.price}</h4>
                        <p>Ingredients: ${pizza.ingredients.join(', ')}</p>
                    </div>
                `;
                pizzaMenuDiv.appendChild(pizzaItem);
            });

            // Populate drinks menu
            const drinksMenuList = document.getElementById('output-drinks-menu');
            drinksMenuList.innerHTML = '';
            drinksMenu.forEach(drink => {
                const drinkItem = document.createElement('li');
                drinkItem.textContent = `${drink.name} - ₺${drink.price}`;
                drinksMenuList.appendChild(drinkItem);
            });

            // Show the output section
            outputDiv.style.display = 'block';
        });
    </script>
</body>
</html>
